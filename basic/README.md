# リファクタリング基礎編

「リファクタリング」と聞いてもピンとこない方向けの課題です。

## リファクタリングとは

プログラムの機能は変更せずにコードを書き直すことです。

> リファクタリングとは、ソフトウェアの外部の振る舞いを保ったままで、内部の構造を改善 していく作業を指します。
> 
> リファクタリング(第2版): 既存のコードを安全に改善する (OBJECT TECHNOLOGY SERIES) (日本語)より

## どんなときにやるの？
リファクタリングするタイミングはいろいろあると思いますが以下にこんな感じの時にやりますという例を紹介します。

### やりたくなった時
仕事でなければ好きな時にやっていいと思います。自分で書いたプログラムを何回書き直したことか。


### 利用している構文やライブラリが古くなった時
Deprecated（非推奨、廃止予定）になったコードが発生した時。
下方互換のために残してあるだけで、なるべく利用しないでほしい。そのうち廃止する。という発表があった場合は書き直します。
また、バージョンアップなどによりよりよい書き方が可能になった時に書き直したりします。

### 既存コードへのテストの追加
テストがないコードにテストを追加する場合に、テストが書きやすいようにリファクタリングする場合があります。

### 保守性の向上
同じような処理を2か所以上で書いていたり、関数、クラスなどの呼び出し、参照がスパゲティーのように入り組んでいたりする場合。
後で見た人が実装を理解するのが難しく時間がかかる場合などにもリファクタリングします。

## リファクタリングする前にやること
テストがなかったらテストを書く。
テストがあったらテストが正しく現在の機能をテストできているか確認しておく。
現在のコードの正しさを証明するテストを書き、リファクタリングした後も機能が変わっていないか確認するために正しいテストが必要です。

## リファクタリングでやらないこと
### 機能の追加
リファクタリングと機能の追加を同時に行うと混乱します。


